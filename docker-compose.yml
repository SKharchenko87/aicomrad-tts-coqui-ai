version: '3.8'

services:
  coqui-tts:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        BUILD_FOR_GPU: 0 # Установите 1 для GPU сборки
    image: coqui-tts:latest
    container_name: coqui-tts-service
    ports:
      - "5000:5000"
    environment:
      - PORT=5000
      - CACHE_TTL_SECONDS=86400
      - MAX_TEXT_LENGTH=1000
      - USE_GPU=0 # Установите 1 для использования GPU
    volumes:
      - ./cache:/app/cache
      - ./models:/app/models
    restart: unless-stopped
    # Раскомментируйте для GPU поддержки:
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: 1
    #           capabilities: [gpu]
